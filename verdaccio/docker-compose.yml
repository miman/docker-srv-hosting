services:
  verdaccio:
    image: verdaccio/verdaccio:latest
    container_name: verdaccio-npm-cache
    restart: unless-stopped
    ports:
      # Port 4873 är standardporten för Verdaccio
      - "4873:4873"
    environment:
      # Sätter startläget till produktionsläge (bättre prestanda)
      - NODE_ENV=production
    volumes:
      # 1. Konfigurationsfilen (för att behålla dina proxy- och användarinställningar)
      - ${DOCKER_FOLDER}/verdaccio/conf:/verdaccio/conf
      
      # 2. Databas/Cache (här sparas alla cachade NPM-paket)
      - ${DOCKER_FOLDER}/verdaccio/storage:/verdaccio/storage
      
      # 3. Loggfiler
      - ${DOCKER_FOLDER}/verdaccio/log:/verdaccio/log